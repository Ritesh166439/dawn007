<section class="slider-modern" id="slider-{{ section.id }}">
    <div class="slides">
        {% for block in section.blocks %}
        <div class="slide">
            {% if block.settings.image != blank %}
            <img src="{{ block.settings.image | image_url: width: 1800 }}" alt="">
            {% else %}
            {{ 'lifestyle-1' | placeholder_svg_tag }}
            {% endif %}

            <div class="overlay">
                <h2>{{ block.settings.title }}</h2>
                <p>{{ block.settings.text }}</p>
                {% if block.settings.button_link != blank %}
                <a href="{{ block.settings.button_link }}" class="btn">
                    {{ block.settings.button_text }}
                </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="dots"></div>
</section>

<style>
    .slider-modern {
        position: relative;
        overflow: hidden;
        border-radius: 16px
    }

    .slides {
        display: flex;
        transition: 0.6s ease
    }

    .slide {
        min-width: 100%;
        position: relative
    }

    .slide img {
        width: 100%;
        height: 480px;
        object-fit: cover
    }

    .overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(to right, rgba(0, 0, 0, .6), transparent);
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 60px;
        color: #fff
    }

    .overlay h2 {
        font-size: 42px;
        font-weight: 700
    }

    .overlay p {
        max-width: 500px;
        margin: 10px 0 20px
    }

    .btn {
        background: #fff;
        color: #000;
        padding: 12px 28px;
        border-radius: 999px;
        width: fit-content;
        font-weight: 600;
        transition: .3s
    }

    .btn:hover {
        background: #000;
        color: #fff
    }

    .dots {
        position: absolute;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px
    }

    .dots span {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #fff;
        opacity: .5;
        cursor: pointer
    }

    .dots span.active {
        opacity: 1
    }
</style>

<script>
    (function () {
        const slider = document.querySelector("#slider-{{ section.id }}");
        const slides = slider.querySelector(".slides");
        const slideCount = slides.children.length;
        const dotsBox = slider.querySelector(".dots");
        let index = 0;

        for (let i = 0; i < slideCount; i++) {
            const dot = document.createElement("span");
            if (i == 0) dot.classList.add("active");
            dot.onclick = () => go(i);
            dotsBox.appendChild(dot);
        }

        const dots = dotsBox.children;

        function go(i) {
            index = i;
            slides.style.transform = `translateX(-${i * 100}%)`;
            [...dots].forEach(d => d.classList.remove("active"));
            dots[i].classList.add("active");
        }

        setInterval(() => {
            index = (index + 1) % slideCount;
            go(index);
        }, 4000);
    })();
</script>

{% schema %}
{
"name": "Modern Slider",
"blocks": [
{
"type": "slide",
"name": "Slide",
"settings": [
{"type":"image_picker","id":"image","label":"Image"},
{"type":"text","id":"title","label":"Title","default":"New Collection"},
{"type":"textarea","id":"text","label":"Description"},
{"type":"text","id":"button_text","label":"Button Text","default":"Shop Now"},
{"type":"url","id":"button_link","label":"Button Link"}
]
}
],
"presets": [
{
"name": "Modern Slider"
}
]
}
{% endschema %}